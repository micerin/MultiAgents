# Agent Sandbox Dockerfile
FROM python:3.11-slim

# 安装系统依赖
RUN apt-get update && apt-get install -y \
    git \
    curl \
    && rm -rf /var/lib/apt/lists/*

# 创建非 root 用户
RUN useradd -m -s /bin/bash agent
USER agent
WORKDIR /home/agent/workspace

# 安装 Python 依赖
COPY --chown=agent:agent requirements.txt /home/agent/
RUN pip install --user --no-cache-dir -r /home/agent/requirements.txt

# 设置环境变量
ENV PATH="/home/agent/.local/bin:${PATH}"
ENV PYTHONUNBUFFERED=1

CMD ["python"]
